# Crypto collector workload environment
# Copy to: /opt/ploy/env/crypto-collector.env

PLOY_DRY_RUN__ENABLED=true
PLOY_RUN_SQLX_MIGRATIONS=true
PLOY_REQUIRE_SQLX_MIGRATIONS=true
PLOY_COORDINATOR__HEARTBEAT_STALE_WARN_COOLDOWN_SECS=300
PLOY_DEPLOYMENTS_FILE=/opt/ploy/data/state/deployments.json
PLOY_ACCOUNT__ID=default

# Shared DB with other workloads (sports/orderbook-history) is recommended.
PLOY_DATABASE__URL=postgres://ploy:CHANGE_ME@127.0.0.1:5432/ploy

# PM token target refresh + quote/trade collectors.
PM_COLLECTOR_REFRESH_SECS=60
PM_TRADES_POLL_SECS=10
PM_TRADES_PAGE_LIMIT=200
PM_TRADES_MAX_PAGES=10
PM_TRADES_OVERLAP_SECS=120
PM_TRADES_CONCURRENCY=4

# Settlement collector (writes pm_token_settlements continuously).
PM_SETTLEMENT_POLL_SECS=60
PM_SETTLEMENT_TARGETS_LIMIT=1000
PM_SETTLEMENT_UNRESOLVED_LIMIT=1000
PM_SETTLEMENT_TARGET_LOOKBACK_SECS=86400
PM_SETTLEMENT_MAX_TOKENS_PER_CYCLE=500
PM_SETTLEMENT_CONCURRENCY=4

RUST_LOG=info,ploy=info,sqlx=warn
