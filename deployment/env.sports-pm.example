# Sports PM workload environment
# Copy to: /opt/ploy/env/sports-pm.env

# Required only for live orders.
# Recommended: set this in `/opt/ploy/.env` if/when you go live.
# POLYMARKET_PRIVATE_KEY=0x...

# Sports workload needs PostgreSQL for nba_team_stats.
PLOY_DATABASE__URL=postgres://ploy:CHANGE_ME@127.0.0.1:5432/ploy

# Single DB multi-account scope
PLOY_ACCOUNT__ID=default

# Safety defaults
PLOY_DRY_RUN__ENABLED=true
PLOY_NBA_COMEBACK__ENABLED=true
PLOY_RUN_SQLX_MIGRATIONS=true
PLOY_REQUIRE_SQLX_MIGRATIONS=true
PLOY_COORDINATOR__HEARTBEAT_STALE_WARN_COOLDOWN_SECS=300
PLOY_DEPLOYMENTS_FILE=/opt/ploy/data/state/deployments.json

# Coordinator-level sizing: Kelly (conservative, opt-in).
# Requires strategies to emit `signal_fair_value` (p) metadata.
PLOY_COORDINATOR__KELLY_SIZING_ENABLED=true
PLOY_COORDINATOR__KELLY_FRACTION_MULTIPLIER=0.25
PLOY_COORDINATOR__KELLY_MIN_EDGE=0
PLOY_COORDINATOR__KELLY_MIN_SHARES=1

# Account-level risk budget (match crypto env):
# - Keep cash reserve (don't consume full balance)
# - Split deployable budget as crypto=2/3, sports=1/3
PLOY_RISK__ACCOUNT_RESERVE_PCT=0.15
PLOY_RISK__CIRCUIT_BREAKER_AUTO_RECOVER=true
PLOY_RISK__CIRCUIT_BREAKER_COOLDOWN_SECS=300
PLOY_RISK__CRYPTO_ALLOCATION_PCT=0.6667
PLOY_RISK__SPORTS_ALLOCATION_PCT=0.3333

# Sports market allocator:
# - cap sports domain budget by active games
# - avoid one game consuming all sports capital
PLOY_COORDINATOR__SPORTS_ALLOCATOR_ENABLED=true
PLOY_COORDINATOR__SPORTS_AUTO_SPLIT_BY_ACTIVE_MARKETS=true
PLOY_COORDINATOR__SPORTS_MARKET_CAP_PCT=0.35

# Logging
RUST_LOG=info,ploy=info,sqlx=warn
