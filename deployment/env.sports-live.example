# Sports live workload environment
# Copy to: /opt/ploy/env/sports-live.env

# Required for live order placement.
# Recommended: set this in `/opt/ploy/.env` (shared by all workloads),
# so workload env overlays never override it with an empty placeholder.
# POLYMARKET_PRIVATE_KEY=0x...

# Sports workload needs PostgreSQL for nba_team_stats.
PLOY_DATABASE__URL=postgres://ploy:CHANGE_ME@127.0.0.1:5432/ploy

# Single DB multi-account scope
PLOY_ACCOUNT__ID=default

# Live mode
PLOY_DRY_RUN__ENABLED=false
PLOY_REQUIRE_DB=true
PLOY_RUN_SQLX_MIGRATIONS=true
PLOY_REQUIRE_SQLX_MIGRATIONS=true
PLOY_COORDINATOR__HEARTBEAT_STALE_WARN_COOLDOWN_SECS=300
PLOY_DEPLOYMENTS_FILE=/opt/ploy/data/state/deployments.json

# Coordinator-level sizing (Kelly, conservative).
PLOY_COORDINATOR__KELLY_SIZING_ENABLED=true
PLOY_COORDINATOR__KELLY_FRACTION_MULTIPLIER=0.25
PLOY_COORDINATOR__KELLY_MIN_EDGE=0.01
PLOY_COORDINATOR__KELLY_MIN_SHARES=1

# Duplicate guard (recommended even for sports exits/entries).
PLOY_COORDINATOR__DUPLICATE_GUARD_ENABLED=true
PLOY_COORDINATOR__DUPLICATE_GUARD_WINDOW_MS=60000
PLOY_COORDINATOR__DUPLICATE_GUARD_SCOPE=market

# Account-level risk budget (match crypto env):
# - Keep cash reserve (don't consume full balance)
# - Split deployable budget as crypto=2/3, sports=1/3
PLOY_RISK__ACCOUNT_RESERVE_PCT=0.15
PLOY_RISK__CIRCUIT_BREAKER_AUTO_RECOVER=true
PLOY_RISK__CIRCUIT_BREAKER_COOLDOWN_SECS=300
PLOY_RISK__CRYPTO_ALLOCATION_PCT=0.6667
PLOY_RISK__SPORTS_ALLOCATION_PCT=0.3333

# Sports market allocator:
# - cap sports domain budget by active games
# - avoid one game consuming all sports capital
PLOY_COORDINATOR__SPORTS_ALLOCATOR_ENABLED=true
PLOY_COORDINATOR__SPORTS_AUTO_SPLIT_BY_ACTIVE_MARKETS=true
PLOY_COORDINATOR__SPORTS_MARKET_CAP_PCT=0.35

# Logging
RUST_LOG=info,ploy=info,sqlx=warn
