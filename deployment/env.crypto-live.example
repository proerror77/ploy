# Crypto live workload environment
# Copy to: /opt/ploy/env/crypto-live.env

# Required for live order placement.
POLYMARKET_PRIVATE_KEY=

# Live mode
PLOY_DRY_RUN__ENABLED=false
PLOY_REQUIRE_DB=true
PLOY_RUN_SQLX_MIGRATIONS=true
PLOY_REQUIRE_SQLX_MIGRATIONS=true
PLOY_COORDINATOR__HEARTBEAT_STALE_WARN_COOLDOWN_SECS=300
PLOY_DEPLOYMENTS_FILE=/opt/ploy/data/state/deployments.json

# Single DB multi-account scope
PLOY_ACCOUNT__ID=default
PLOY_DATABASE__URL=postgres://ploy:CHANGE_ME@127.0.0.1:5432/ploy

# Coordinator-level sizing (Kelly, conservative).
PLOY_COORDINATOR__KELLY_SIZING_ENABLED=true
PLOY_COORDINATOR__KELLY_FRACTION_MULTIPLIER=0.25
PLOY_COORDINATOR__KELLY_MIN_EDGE=0.01

# Account-level risk budget:
# - Keep a cash reserve and avoid deploying 100% capital.
# - Split deployable budget as crypto=2/3, sports=1/3 (sports may be 0 if not running).
PLOY_RISK__ACCOUNT_RESERVE_PCT=0.15
PLOY_RISK__CRYPTO_ALLOCATION_PCT=0.6667
PLOY_RISK__SPORTS_ALLOCATION_PCT=0.3333
PLOY_RISK__CIRCUIT_BREAKER_AUTO_RECOVER=true
PLOY_RISK__CIRCUIT_BREAKER_COOLDOWN_SECS=300

# Capital allocator (conservative).
PLOY_COORDINATOR__DUPLICATE_GUARD_ENABLED=true
PLOY_COORDINATOR__DUPLICATE_GUARD_WINDOW_MS=60000
# Explicit: block duplicate BUYs across *all* deployments for the same market_slug.
PLOY_COORDINATOR__DUPLICATE_GUARD_SCOPE=market
PLOY_COORDINATOR__CRYPTO_ALLOCATOR_ENABLED=true
PLOY_COORDINATOR__CRYPTO_ALLOCATOR_TOTAL_CAP_USD=100
PLOY_COORDINATOR__CRYPTO_COIN_CAP_BTC_PCT=0.40
PLOY_COORDINATOR__CRYPTO_COIN_CAP_ETH_PCT=0.30
PLOY_COORDINATOR__CRYPTO_COIN_CAP_SOL_PCT=0.20
PLOY_COORDINATOR__CRYPTO_COIN_CAP_XRP_PCT=0.12
PLOY_COORDINATOR__CRYPTO_COIN_CAP_OTHER_PCT=0.10
PLOY_COORDINATOR__CRYPTO_HORIZON_CAP_5M_PCT=0.25
PLOY_COORDINATOR__CRYPTO_HORIZON_CAP_15M_PCT=0.65
PLOY_COORDINATOR__CRYPTO_HORIZON_CAP_OTHER_PCT=0.20

# Logging
RUST_LOG=info,ploy=info,sqlx=warn
