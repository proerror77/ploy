# 🎨 Ploy Trading Bot - React 前端設計方案

**設計時間：** 2026-01-10
**目標：** 為 Ploy 交易機器人構建現代化的 Web 管理界面

---

## 🎯 前端功能設計

### 📊 核心頁面

#### 1. 儀表板 (Dashboard)
```
┌─────────────────────────────────────────────────────────────┐
│  🤖 Ploy Trading Bot                         👤 Admin   ⚙️  │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  📊 今日統計                                                  │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 總交易數  │  │  總盈虧   │  │  勝率    │  │ 運行時間  │   │
│  │   12     │  │  +$247   │  │   75%   │  │  8.5h    │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
│                                                               │
│  📈 實時市場監控                                              │
│  ┌────────────────────────────────────────────────────┐     │
│  │ BTC/USDT  🟢 $43,250  ↑0.18%  Polymarket: 42¢     │     │
│  │ ETH/USDT  🔴 $2,280   ↓0.22%  Polymarket: 38¢     │     │
│  │ SOL/USDT  🟢 $102.50  ↑0.12%  Polymarket: 48¢     │     │
│  │ XRP/USDT  🟢 $0.5234  ↑0.09%  Polymarket: 51¢     │     │
│  └────────────────────────────────────────────────────┘     │
│                                                               │
│  🎯 當前持倉                                                  │
│  ┌────────────────────────────────────────────────────┐     │
│  │ #1234  BTC UP   100股 @ 42¢  當前: 48¢  盈虧: +$6 │     │
│  │ #1235  ETH DOWN  50股 @ 38¢  當前: 42¢  盈虧: +$2 │     │
│  └────────────────────────────────────────────────────┘     │
│                                                               │
│  📉 盈虧曲線圖 (最近 24 小時)                                 │
│  ┌────────────────────────────────────────────────────┐     │
│  │      ╱╲                                             │     │
│  │     ╱  ╲      ╱╲                                    │     │
│  │    ╱    ╲    ╱  ╲                                   │     │
│  │   ╱      ╲  ╱    ╲                                  │     │
│  │  ╱        ╲╱      ╲                                 │     │
│  └────────────────────────────────────────────────────┘     │
└─────────────────────────────────────────────────────────────┘
```

#### 2. 交易歷史 (Trade History)
```
┌─────────────────────────────────────────────────────────────┐
│  📜 交易歷史                                                  │
├─────────────────────────────────────────────────────────────┤
│  篩選: [全部 ▼] [今天 ▼] [BTC/USDT ▼]          🔍 搜索      │
├─────────────────────────────────────────────────────────────┤
│  ID    時間      符號    方向  價格   數量  狀態    盈虧      │
│  1245  10:28:45  BTC    UP   42¢   100  ✅完成  +$9.00    │
│  1244  10:15:30  BTC    UP   42¢   100  ✅完成  +$9.00    │
│  1243  09:42:12  ETH    DOWN 38¢    50  ✅完成  +$4.50    │
│  1242  09:15:08  SOL    UP   45¢   100  ❌虧損  -$3.00    │
│  1241  08:53:22  BTC    UP   41¢   100  ✅完成  +$8.50    │
│                                                               │
│  [詳情] 按鈕 → 查看完整交易詳情                              │
└─────────────────────────────────────────────────────────────┘
```

#### 3. 實時監控 (Live Monitor)
```
┌─────────────────────────────────────────────────────────────┐
│  🔴 實時監控                              [暫停] [導出日誌]   │
├─────────────────────────────────────────────────────────────┤
│  [10:28:45] ✅ 止盈觸發: BTC UP @ 51¢, 利潤 +$9           │
│  [10:20:15] 📝 訂單成交: BTC UP 100股 @ 42¢               │
│  [10:15:30] 🎯 下單信號: BTC 上漲 0.18%, 買入 UP           │
│  [10:10:22] 📊 掃描市場: 4 個交易對, 無信號               │
│  [10:05:18] ✅ 健康檢查通過                               │
│  [10:00:00] 🤖 系統啟動完成                               │
│                                                               │
│  系統狀態: 🟢 運行中  |  數據庫: 🟢 正常  |  WebSocket: 🟢  │
└─────────────────────────────────────────────────────────────┘
```

#### 4. 策略配置 (Strategy Config)
```
┌─────────────────────────────────────────────────────────────┐
│  ⚙️ 策略配置                                                  │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  交易符號 (多選)                                              │
│  ☑ BTCUSDT  ☑ ETHUSDT  ☑ SOLUSDT  ☑ XRPUSDT               │
│                                                               │
│  風險參數                                                     │
│  最小移動百分比    [0.15] %                                  │
│  最大入場價格      [45] ¢                                    │
│  每筆股數          [100] 股                                  │
│                                                               │
│  交易模式                                                     │
│  ◉ 預測模式 (早入場 + 止盈止損)                              │
│  ○ 確認模式 (晚入場 + 持有到結算)                            │
│                                                               │
│  預測模式參數                                                 │
│  止盈百分比        [20] %                                    │
│  止損百分比        [12] %                                    │
│  最小剩餘時間      [300] 秒                                  │
│  最大剩餘時間      [900] 秒                                  │
│                                                               │
│  風險控制                                                     │
│  最大併發持倉      [5] 個                                    │
│  單日最大交易      [20] 筆                                   │
│  單日最大虧損      [$100]                                    │
│                                                               │
│              [保存配置] [重置為默認] [應用並重啟]             │
└─────────────────────────────────────────────────────────────┘
```

#### 5. 系統控制 (System Control)
```
┌─────────────────────────────────────────────────────────────┐
│  🎮 系統控制                                                  │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  當前狀態: 🟢 運行中                                         │
│  運行時間: 8 小時 32 分鐘                                    │
│  最後心跳: 2 秒前                                            │
│                                                               │
│  快速操作                                                     │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐                 │
│  │ ⏸️ 暫停   │  │ 🔄 重啟   │  │ 🛑 停止   │                 │
│  └──────────┘  └──────────┘  └──────────┘                 │
│                                                               │
│  緊急操作                                                     │
│  ┌──────────────────────────────────────────┐               │
│  │ 🚨 平倉所有持倉並停止交易                 │               │
│  └──────────────────────────────────────────┘               │
│                                                               │
│  系統信息                                                     │
│  版本: v1.0.0 (Phase 1 安全修復)                            │
│  部署: AWS ap-northeast-1                                   │
│  CPU: 15%  內存: 230MB/1GB  網絡: ↑2KB/s ↓15KB/s          │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

#### 6. 安全審計 (Security Audit)
```
┌─────────────────────────────────────────────────────────────┐
│  🔒 安全審計                                                  │
├─────────────────────────────────────────────────────────────┤
│  時間       事件類型            嚴重度  詳情                  │
│  10:15:31  重複訂單檢測          INFO   訂單 #1234 被拒絕    │
│  10:10:22  版本衝突檢測          WARN   Cycle #567 更新衝突  │
│  10:05:18  過期報價拒絕          INFO   報價 32.1 秒被拒絕   │
│  09:58:45  Nonce 恢復成功        INFO   恢復 nonce: 1234567  │
│  09:52:33  冪等性緩存命中        INFO   返回緩存結果          │
│                                                               │
│  統計 (最近 24 小時)                                         │
│  重複訂單阻止: 3 次                                          │
│  版本衝突檢測: 1 次                                          │
│  過期報價拒絕: 12 次                                         │
│  安全事件總數: 16 次                                         │
└─────────────────────────────────────────────────────────────┘
```

---

## 🛠️ 技術棧

### 前端框架
```json
{
  "framework": "React 18 + TypeScript",
  "styling": "Tailwind CSS + shadcn/ui",
  "state": "Zustand (輕量級狀態管理)",
  "data": "TanStack Query (React Query)",
  "charts": "Recharts",
  "websocket": "Socket.io-client",
  "routing": "React Router v6",
  "forms": "React Hook Form + Zod",
  "icons": "Lucide React",
  "notifications": "Sonner"
}
```

### 後端 API (需要添加到 Rust)
```rust
// 需要在 Rust 後端添加的 API 端點

// 1. 統計 API
GET  /api/stats/today          // 今日統計
GET  /api/stats/summary        // 總覽統計
GET  /api/stats/pnl            // 盈虧曲線

// 2. 交易 API
GET  /api/trades               // 交易歷史
GET  /api/trades/:id           // 交易詳情
GET  /api/positions            // 當前持倉

// 3. 系統 API
GET  /api/system/status        // 系統狀態
POST /api/system/start         // 啟動交易
POST /api/system/stop          // 停止交易
POST /api/system/restart       // 重啟系統

// 4. 配置 API
GET  /api/config               // 獲取配置
PUT  /api/config               // 更新配置

// 5. 安全審計 API
GET  /api/audit/events         // 安全事件

// 6. WebSocket
WS   /ws                       // 實時數據流
```

---

## 📁 項目結構

```
ploy-frontend/
├── public/
│   └── index.html
├── src/
│   ├── components/          # UI 組件
│   │   ├── dashboard/
│   │   │   ├── StatsCard.tsx
│   │   │   ├── MarketMonitor.tsx
│   │   │   ├── PositionsList.tsx
│   │   │   └── PnLChart.tsx
│   │   ├── trades/
│   │   │   ├── TradeTable.tsx
│   │   │   └── TradeDetail.tsx
│   │   ├── monitor/
│   │   │   └── LogStream.tsx
│   │   ├── config/
│   │   │   └── StrategyForm.tsx
│   │   ├── system/
│   │   │   └── ControlPanel.tsx
│   │   └── ui/              # shadcn/ui 組件
│   │       ├── button.tsx
│   │       ├── card.tsx
│   │       ├── table.tsx
│   │       └── ...
│   ├── pages/               # 頁面
│   │   ├── Dashboard.tsx
│   │   ├── TradeHistory.tsx
│   │   ├── LiveMonitor.tsx
│   │   ├── StrategyConfig.tsx
│   │   ├── SystemControl.tsx
│   │   └── SecurityAudit.tsx
│   ├── hooks/               # 自定義 Hooks
│   │   ├── useStats.ts
│   │   ├── useTrades.ts
│   │   ├── useWebSocket.ts
│   │   └── useSystemStatus.ts
│   ├── services/            # API 服務
│   │   ├── api.ts
│   │   └── websocket.ts
│   ├── store/               # 狀態管理
│   │   └── useStore.ts
│   ├── types/               # TypeScript 類型
│   │   └── index.ts
│   ├── utils/               # 工具函數
│   │   └── formatters.ts
│   ├── App.tsx
│   └── main.tsx
├── package.json
├── tsconfig.json
├── vite.config.ts
└── tailwind.config.js
```

---

## 🎨 UI 設計規範

### 顏色方案
```css
/* 主題色 */
--primary: #3b82f6      /* 藍色 - 主要操作 */
--success: #10b981      /* 綠色 - 盈利/成功 */
--danger: #ef4444       /* 紅色 - 虧損/警告 */
--warning: #f59e0b      /* 黃色 - 提示 */
--info: #6366f1         /* 紫色 - 信息 */

/* 狀態色 */
--running: #10b981      /* 運行中 */
--paused: #f59e0b       /* 暫停 */
--stopped: #6b7280      /* 已停止 */
--error: #ef4444        /* 錯誤 */
```

### 組件庫: shadcn/ui
- 高質量、可定制的 UI 組件
- 基於 Radix UI + Tailwind CSS
- 完全的類型安全
- 暗色模式支持

---

## 🚀 部署方案

### 方案 1: AWS S3 + CloudFront (推薦)
```bash
# 構建前端
npm run build

# 部署到 S3
aws s3 sync dist/ s3://ploy-frontend/

# CloudFront 分發
# 全球 CDN 加速
# HTTPS 自動配置
```

**成本：** ~$5/月

### 方案 2: Vercel (最簡單)
```bash
# 一鍵部署
vercel deploy

# 自動 HTTPS
# 全球 CDN
# 零配置
```

**成本：** 免費（個人項目）

### 方案 3: 和後端同服務器
```dockerfile
# 在 Dockerfile 中添加 Nginx
FROM nginx:alpine AS frontend
COPY dist/ /usr/share/nginx/html/
```

**成本：** $0（使用現有 EC2）

---

## 📊 實時數據流

### WebSocket 事件
```typescript
// 前端訂閱的事件
interface WebSocketEvents {
  // 交易事件
  'trade:new': Trade;           // 新交易
  'trade:update': Trade;         // 交易更新
  'trade:completed': Trade;      // 交易完成

  // 市場數據
  'market:price': PriceUpdate;   // 價格更新
  'market:signal': Signal;       // 交易信號

  // 系統狀態
  'system:status': SystemStatus; // 系統狀態
  'system:log': LogEntry;        // 日誌條目

  // 安全事件
  'security:event': AuditEvent;  // 安全事件
}
```

---

## 🔐 認證和授權

### 簡單方案（初期）
```typescript
// 環境變量密碼
const ADMIN_PASSWORD = process.env.ADMIN_PASSWORD;

// 簡單的 JWT 認證
if (password === ADMIN_PASSWORD) {
  const token = jwt.sign({ role: 'admin' }, SECRET);
  return token;
}
```

### 完整方案（後期）
- OAuth 2.0 集成
- 多用戶支持
- 角色權限管理
- API Key 管理

---

## 📦 完整實施計劃

### Phase 1: 基礎框架（2-3 小時）
- [ ] 創建 React + TypeScript 項目
- [ ] 配置 Tailwind CSS
- [ ] 安裝 shadcn/ui 組件
- [ ] 配置路由和狀態管理
- [ ] 設置 API 客戶端

### Phase 2: 核心頁面（4-5 小時）
- [ ] 實現儀表板頁面
- [ ] 實現交易歷史頁面
- [ ] 實現實時監控頁面
- [ ] 實現策略配置頁面

### Phase 3: 後端 API（3-4 小時）
- [ ] Rust 添加 HTTP API 端點
- [ ] 實現 WebSocket 服務
- [ ] 添加 CORS 配置
- [ ] API 文檔

### Phase 4: 集成測試（2-3 小時）
- [ ] 前後端聯調
- [ ] WebSocket 測試
- [ ] 部署測試

### Phase 5: 部署上線（1-2 小時）
- [ ] 構建生產版本
- [ ] 部署到 Vercel/AWS
- [ ] 配置域名
- [ ] 性能優化

**總計：** 12-17 小時

---

## 💰 成本估算

### 開發成本
- 前端開發: 12-17 小時
- 後端 API: 3-4 小時
- **總計: 15-21 小時**

### 運行成本（每月）
```
方案 1 (Vercel):
- 前端: $0 (免費)
- 後端: $25-95 (AWS)
- 總計: $25-95/月

方案 2 (AWS S3 + CloudFront):
- 前端: $5 (S3 + CDN)
- 後端: $25-95 (AWS)
- 總計: $30-100/月

方案 3 (同服務器):
- 前端: $0
- 後端: $25-95 (AWS)
- 總計: $25-95/月
```

---

## 🎯 MVP 功能清單（最小可行產品）

### 第一版必須有的功能
- ✅ 儀表板（統計 + 實時市場）
- ✅ 交易歷史（列表 + 詳情）
- ✅ 實時日誌
- ✅ 系統控制（啟動/停止）
- ✅ 基礎認證

### 第二版增強功能
- 策略配置編輯器
- 安全審計日誌
- 盈虧圖表分析
- 移動端適配
- 告警通知

---

## 📱 示例截圖設計

### 儀表板（桌面端）
```
┌────────────────────────────────────────────────────────────┐
│ 🤖 Ploy Trading Bot        [Dashboard] [Trades] [Monitor]  │
│                                              👤 Admin  🌙   │
├────────────────────────────────────────────────────────────┤
│                                                              │
│  ┏━━━━━━━━━━━━┓  ┏━━━━━━━━━━━━┓  ┏━━━━━━━━━━━━┓         │
│  ┃ 今日交易   ┃  ┃  今日盈虧   ┃  ┃   勝率     ┃         │
│  ┃    12     ┃  ┃  +$247     ┃  ┃   75%     ┃         │
│  ┃ 📊        ┃  ┃  💰        ┃  ┃   🎯      ┃         │
│  ┗━━━━━━━━━━━━┛  ┗━━━━━━━━━━━━┛  ┗━━━━━━━━━━━━┛         │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ 📈 盈虧曲線圖 (24h)                                  │  │
│  │                                                        │  │
│  │  $300 ┤                    ╱                         │  │
│  │       │                 ╱                            │  │
│  │  $200 ┤              ╱                               │  │
│  │       │           ╱                                  │  │
│  │  $100 ┤        ╱                                     │  │
│  │       │     ╱                                        │  │
│  │    $0 ┴──────────────────────────────────           │  │
│  │       00:00    06:00    12:00    18:00    24:00     │  │
│  └──────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────┘
```

---

## ✅ 下一步行動

我可以立即幫你：

1. **創建完整的前端項目**
   - React + TypeScript 腳手架
   - 所有頁面組件
   - API 集成代碼
   - 部署配置

2. **添加後端 API 支持**
   - Rust HTTP API 端點
   - WebSocket 服務
   - CORS 配置
   - API 文檔

3. **部署配置**
   - Vercel 配置
   - AWS S3 配置
   - Nginx 配置

需要我現在開始創建前端項目嗎？我會生成：
- ✅ 完整的項目結構
- ✅ 所有必需的配置文件
- ✅ 核心組件代碼
- ✅ 部署指南

**預計交付時間：** 我可以在 30 分鐘內為你生成所有前端基礎代碼！

要開始嗎？🚀
